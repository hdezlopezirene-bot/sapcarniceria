<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Panel Control - Carnicería</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --primary: #667eea;
      --secondary: #764ba2;
      --bg: #ffffff;
      --surface: #f9fafb;
      --text: #333333;
      --error: #dc3545;
    }
    .dark-mode {
      --bg: #121212;
      --surface: #252525;
      --text: #ffffff;
      --background: black;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 40px 20px;
      overflow-y: auto;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    .logo {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 24px;
      font-weight: 700;
      margin: 0 auto 12px;
    }
    h1 { font-size: 26px; color: var(--text); }
    .subtitle { 
      font-size: 16px; 
      color: var(--text); 
      margin-bottom: 30px;
      text-align: center;
    }
    
    /* Grid de 3 columnas con grupos separados */
    .grid-group {
      width: 100%;
      max-width: 420px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .card {
      aspect-ratio: 1;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform .3s, box-shadow .3s;
      padding: 15px;
      text-align: center;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 30px rgba(102, 126, 234, .2);
    }
    .card i {
      font-size: 28px;
      color: var(--primary);
      margin-bottom: 8px;
    }
    .card .title {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
    }
    
    /* CRUD */
    .crud {
      width: 100%;
      max-width: 600px;
      display: none;
    }
    .crud.active {
      display: block;
      animation: fadeIn .4s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .back {
      background: none;
      border: none;
      font-size: 15px;
      color: var(--primary);
      cursor: pointer;
      margin-bottom: 20px;
    }
    .crud-title {
      font-size: 22px;
      margin-bottom: 20px;
      color: var(--text);
    }
    .form-row {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }
    .form-row input, .form-row select {
      flex: 1;
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 15px;
      background: var(--bg);
      color: var(--text);
    }
    .form-row button {
      padding: 12px 20px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 15px;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--surface);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,.05);
    }
    th, td {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
    }
    th {
      background: var(--primary);
      color: #fff;
      font-weight: 600;
    }
    .btn-sm {
      padding: 6px 12px;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
    }
    .btn-primary { background: var(--primary); color: #fff; }
    .btn-danger  { background: var(--error);   color: #fff; }
    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      font-size: 20px;
      color: var(--text-secondary);
      cursor: pointer;
    }
  </style>
</head>
<body>
  <button class="theme-toggle" onclick="toggleTheme()">
    <i class="fas fa-moon"></i>
  </button>

  <div class="header">
    <div class="logo">CM</div>
    <h1>Carnicería Moderna</h1>
    <div class="subtitle">Sistema de Gestión de Inventario</div>
  </div>

  <!-- GRUPO 1: Operaciones Básicas -->
  <div class="grid-group">
    <div class="card" onclick="openCrud('recepcionar')">
      <i class="fas fa-truck-loading"></i>
      <div class="title">Recepcionar</div>
    </div>
    <div class="card" onclick="openCrud('ubicar')">
      <i class="fas fa-warehouse"></i>
      <div class="title">Ubicar</div>
    </div>
    <div class="card" onclick="openCrud('mover')">
      <i class="fas fa-exchange-alt"></i>
      <div class="title">Mover</div>
    </div>
  </div>

  <!-- GRUPO 2: Gestión de Inventario -->
  <div class="grid-group">
    <div class="card" onclick="openCrud('inventario')">
      <i class="fas fa-boxes"></i>
      <div class="title">Inventario</div>
    </div>
    <div class="card" onclick="openCrud('recuento')">
      <i class="fas fa-clipboard-check"></i>
      <div class="title">Recuento</div>
    </div>
    <div class="card" onclick="openCrud('checkUbicacion')">
      <i class="fas fa-map-marker-alt"></i>
      <div class="title">Check Ubicación</div>
    </div>
  </div>

  <!-- GRUPO 3: Operaciones de Venta -->
  <div class="grid-group">
    <div class="card" onclick="openCrud('buscarProductos')">
      <i class="fas fa-search"></i>
      <div class="title">Buscar Productos</div>
    </div>
    <div class="card" onclick="openCrud('picking')">
      <i class="fas fa-shopping-basket"></i>
      <div class="title">Picking</div>
    </div>
    <div class="card" onclick="openCrud('devolucionesClientes')">
      <i class="fas fa-undo-alt"></i>
      <div class="title">Devoluciones (Clientes)</div>
    </div>
  </div>

  <!-- GRUPO 4: Logística -->
  <div class="grid-group">
    <div class="card" onclick="openCrud('devolucionesProveedores')">
      <i class="fas fa-truck-moving"></i>
      <div class="title">Devoluciones (Proveedores)</div>
    </div>
    <div class="card" onclick="openCrud('expediciones')">
      <i class="fas fa-shipping-fast"></i>
      <div class="title">Expediciones</div>
    </div>
    <div class="card" onclick="openCrud('controlCalidad')">
      <i class="fas fa-award"></i>
      <div class="title">Control de Calidad</div>
    </div>
  </div>

  <!-- GRUPO 5: Gestión de Productos -->
  <div class="grid-group">
    <div class="card" onclick="openCrud('cortesCarne')">
      <i class="fas fa-utensils"></i>
      <div class="title">Cortes de Carne</div>
    </div>
    <div class="card" onclick="openCrud('caducidad')">
      <i class="fas fa-clock"></i>
      <div class="title">Control Caducidad</div>
    </div>
    <div class="card" onclick="openCrud('proveedores')">
      <i class="fas fa-handshake"></i>
      <div class="title">Proveedores</div>
    </div>
  </div>

  <!-- GRUPO 6: Reportes -->
  <div class="grid-group">
    <div class="card" onclick="openCrud('reportesVentas')">
      <i class="fas fa-chart-line"></i>
      <div class="title">Reportes de Ventas</div>
    </div>
    <div class="card" onclick="openCrud('estadisticas')">
      <i class="fas fa-chart-bar"></i>
      <div class="title">Estadísticas</div>
    </div>
    <div class="card" onclick="openCrud('configuracion')">
      <i class="fas fa-cogs"></i>
      <div class="title">Configuración</div>
    </div>
  </div>

  <!-- CRUDS ESPECÍFICOS PARA CARNICERÍA -->
  <!-- RECEPCIONAR -->
  <div id="recepcionar" class="crud">
    <button class="back" onclick="goBack()">← Volver</button>
    <h2 class="crud-title">Recepción de Mercancía</h2>
    <div class="form-row">
      <input type="text" id="rProducto" placeholder="Producto">
      <input type="number" id="rCantidad" placeholder="Cantidad (kg)">
      <button onclick="addRow('recepcionar')">Agregar</button>
    </div>
    <table id="tblRecepcionar">
      <thead>
        <tr>
          <th>#</th>
          <th>Producto</th>
          <th>Cantidad (kg)</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- INVENTARIO -->
  <div id="inventario" class="crud">
    <button class="back" onclick="goBack()">← Volver</button>
    <h2 class="crud-title">Inventario Actual</h2>
    <div class="form-row">
      <input type="text" id="iProducto" placeholder="Producto">
      <input type="number" id="iStock" placeholder="Stock (kg)">
      <button onclick="addRow('inventario')">Agregar</button>
    </div>
    <table id="tblInventario">
      <thead>
        <tr>
          <th>#</th>
          <th>Producto</th>
          <th>Stock (kg)</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- CONTROL CADUCIDAD -->
  <div id="caducidad" class="crud">
    <button class="back" onclick="goBack()">← Volver</button>
    <h2 class="crud-title">Control de Caducidad</h2>
    <div class="form-row">
      <input type="text" id="cProducto" placeholder="Producto">
      <input type="date" id="cCaducidad" placeholder="Fecha Caducidad">
      <button onclick="addRow('caducidad')">Agregar</button>
    </div>
    <table id="tblCaducidad">
      <thead>
        <tr>
          <th>#</th>
          <th>Producto</th>
          <th>Caducidad</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- CORTES DE CARNE -->
  <div id="cortesCarne" class="crud">
    <button class="back" onclick="goBack()">← Volver</button>
    <h2 class="crud-title">Cortes de Carne</h2>
    <div class="form-row">
      <input type="text" id="ctNombre" placeholder="Nombre del corte">
      <input type="text" id="ctCategoria" placeholder="Categoría">
      <button onclick="addRow('cortesCarne')">Agregar</button>
    </div>
    <table id="tblCortesCarne">
      <thead>
        <tr>
          <th>#</th>
          <th>Nombre</th>
          <th>Categoría</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Los demás CRUDs seguirían el mismo patrón -->

  <script>
    /* Base de datos en memoria adaptada para carnicería */
    const db = {
      recepcionar: [], 
      ubicar: [], 
      mover: [], 
      inventario: [],
      recuento: [], 
      checkUbicacion: [], 
      buscarProductos: [], 
      picking: [],
      devolucionesClientes: [], 
      devolucionesProveedores: [], 
      expediciones: [],
      controlCalidad: [],
      cortesCarne: [],
      caducidad: [],
      proveedores: [],
      reportesVentas: [],
      estadisticas: [],
      configuracion: []
    };

    function toggleTheme() {
      document.body.classList.toggle('dark-mode');
      document.querySelector('.theme-toggle i').className =
        document.body.classList.contains('dark-mode') ? 'fas fa-sun' : 'fas fa-moon';
    }

    function openCrud(modulo) {
      document.querySelectorAll('.grid-group').forEach(g => g.style.display = 'none');
      document.querySelectorAll('.crud').forEach(c => c.classList.remove('active'));
      document.getElementById(modulo).classList.add('active');
      renderTable(modulo);
    }

    function goBack() {
      document.querySelectorAll('.crud').forEach(c => c.classList.remove('active'));
      document.querySelectorAll('.grid-group').forEach(g => g.style.display = 'grid');
    }

    function renderTable(modulo) {
      const tbody = document.querySelector(`#tbl${modulo.charAt(0).toUpperCase() + modulo.slice(1)} tbody`);
      tbody.innerHTML = '';
      db[modulo].forEach((row, idx) => {
        let cells = '';
        Object.values(row).forEach(v => cells += `<td>${v}</td>`);
        tbody.insertAdjacentHTML('beforeend', `
          <tr>
            <td>${idx + 1}</td>
            ${cells}
            <td>
              <button class="btn-primary btn-sm" onclick="editRow('${modulo}', ${idx})">Editar</button>
              <button class="btn-danger  btn-sm" onclick="deleteRow('${modulo}', ${idx})">Eliminar</button>
            </td>
          </tr>
        `);
      });
    }

    function addRow(modulo) {
      const inputs = document.querySelectorAll(`#${modulo} .form-row input`);
      let obj = {};
      inputs.forEach(inp => obj[inp.id.replace(modulo.charAt(0), '')] = inp.value.trim());
      if (Object.values(obj).some(v => !v)) return alert('Completa todos los campos');
      db[modulo].push(obj);
      inputs.forEach(i => i.value = '');
      renderTable(modulo);
    }

    function editRow(modulo, idx) {
      const row = db[modulo][idx];
      const keys = Object.keys(row);
      keys.forEach(k => {
        const val = prompt(`${k.charAt(0).toUpperCase() + k.slice(1)}:`, row[k]);
        if (val !== null) row[k] = val;
      });
      renderTable(modulo);
    }

    function deleteRow(modulo, idx) {
      if (confirm('¿Eliminar registro?')) {
        db[modulo].splice(idx, 1);
        renderTable(modulo);
      }
    }

    // Inicializar con algunos datos de ejemplo para carnicería
    window.addEventListener('DOMContentLoaded', () => {
      // Datos de ejemplo para recepción
      db.recepcionar = [
        { producto: 'Lomo Vacuno', cantidad: '50' },
        { producto: 'Pechuga Pollo', cantidad: '30' },
        { producto: 'Costillar Cerdo', cantidad: '25' }
      ];
      
      // Datos de ejemplo para inventario
      db.inventario = [
        { producto: 'Lomo Vacuno', stock: '45' },
        { producto: 'Pechuga Pollo', stock: '28' },
        { producto: 'Costillar Cerdo', stock: '22' }
      ];
      
      // Datos de ejemplo para control de caducidad
      db.caducidad = [
        { producto: 'Lomo Vacuno', caducidad: '2023-10-15' },
        { producto: 'Pechuga Pollo', caducidad: '2023-10-10' },
        { producto: 'Costillar Cerdo', caducidad: '2023-10-08' }
      ];
      
      // Datos de ejemplo para cortes de carne
      db.cortesCarne = [
        { nombre: 'Lomo Liso', categoria: 'Vacuno' },
        { nombre: 'Entraña', categoria: 'Vacuno' },
        { nombre: 'Chuleta', categoria: 'Cerdo' }
      ];
    });
  </script>
</body>
</html>
